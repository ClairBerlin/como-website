import{o,f as i,g as e,i as v,t as c,d as M,c as w,h as b,n as B,a0 as A,r as g,b as E,C as N,a as f,G as j}from"./index.fd494524.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";import{i as I}from"./index.343b9e69.js";var O="/dashboard/assets/como-logo.fc3e99d7.svg",R="/dashboard/assets/fresh-air-medal.8f1f467e.svg";const S={class:"flex max-w-[327px] flex-col items-center gap-2 rounded bg-[#F1F9FE] px-6 pt-7 pb-4 drop-shadow-sm"},z=["src"],D=e("div",{class:"mx-0 text-lg font-bold text-[#1E398F]"},"Frischluft Medaille",-1),V=e("div",{class:"font-medium text-[#3B3B3A]"}," Unsere Langzeitmessungen zeigen, dass an diesem Ort regelm\xE4\xDFig und ausreichend gel\xFCftet wird. Es kann aufgeatmet werden! ",-1),G={name:"FreshAirMedal",setup(t){return(r,l)=>(o(),i("div",S,[e("img",{class:"mb-4 h-12 w-12",src:v(R),alt:"Frischluft Medaille"},null,8,z),D,V]))}},W={class:"flex w-full flex-row items-center justify-between"},q=e("svg",{width:"16",height:"24",viewBox:"0 0 16 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M13.7871 22L2 12L13.7871 2",stroke:"#385BA7","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})],-1),P=[q],T={class:"flex select-none flex-col items-center text-[#385BA7]"},H={class:"text-sm"},U={class:"text-sm font-bold"},Z=e("svg",{width:"16",height:"24",viewBox:"0 0 16 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M2.00004 2L13.7871 12L2.00004 22",stroke:"#385BA7","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"})],-1),K=[Z],J={name:"InstallationSwitch",props:{numberOfInstallations:{type:Number,required:!0},currentInstallation:{type:Number,required:!0},roomName:{type:String,required:!0}},emits:["previous","next"],setup(t,{emit:r}){const l=()=>r("previous"),s=()=>r("next");return(n,a)=>(o(),i("div",W,[e("div",{class:"rounded p-6 hover:bg-[#F1F9FE]",onClick:l},P),e("div",T,[e("div",H,c(t.currentInstallation)+"/"+c(t.numberOfInstallations),1),e("div",U,c(t.roomName),1)]),e("div",{class:"rounded p-6 hover:bg-[#F1F9FE]",onClick:s},K)]))}};const Q=["value"],X={name:"MeasurementVisualization",props:{ppm:{type:Number,required:!0}},setup(t){const r=t,l=M(()=>Math.max(400,Math.min(r.ppm,2e3)));return(s,n)=>(o(),i("input",{type:"range",disabled:"",class:"form-range h-4 w-full appearance-none bg-transparent p-0 focus:shadow-none focus:outline-none focus:ring-0",min:"400",max:"2000",value:v(l)},null,8,Q))}};var Y=L(X,[["__scopeId","data-v-92d52f96"]]);const ee=e("div",{class:"mt-2 text-lg font-bold leading-5 text-[#1E398F]"}," Aktueller Messwert ",-1),te={key:0,class:"text-sm leading-3 text-[#1E398F]"},se={key:1,class:"text-sm leading-3 text-[#1E398F]"},ne={class:"mt-4 self-end text-[#1E398F]"},ae={class:"text-2xl font-bold"},oe=e("span",{class:"text-sm"}," ppm",-1),ie={key:3,class:"mt-4 font-medium text-[#3B3B3A]"},le={key:4,class:"mt-4 font-medium text-[#3B3B3A]"},re=e("span",{class:"text-[#E40032]"},"ST\xD6RUNG ",-1),ce=e("span",null," - Der Sensor macht gerade ein P\xE4uschen! Leider ist gerade keine Anzeige m\xF6glich, da im Moment keine Daten gesendet werden. ",-1),de=[re,ce],ue={name:"CurrentMeasurement",props:{ppm:{type:Number,default:void 0},timestamp:{type:Date,default:void 0}},setup(t){const r=s=>s<=1e3?`Der CO2-Gehalt des Raumes liegt bei ${s} ppm, dies entspricht einem normalen Wert und einer niedrigen Aerosollast. Die Raumluft ist gut und du kannst durchatmen.`:s<=1600?`Der CO2-Gehalt des Raumes liegt bei ${s} ppm, dies entspricht einem leicht erh\xF6hten Wert und somit auch einer erh\xF6hten Aerosollast. Dem Raum w\xFCrde etwas frischer Wind gut tun! `:`Der CO2-Gehalt des Raumes liegt bei ${s} ppm, dies entspricht einem sehr hohen Wert und deutet auf eine hohe Aerosollast hin. Halte lieber die Luft an!`,l=s=>{const n=s.getHours().toString(),a=s.getMinutes()<10?"0"+s.getMinutes().toString():s.getMinutes();return`von ${n}:${a}h`};return(s,n)=>(o(),i("div",{class:B(["flex h-[340px] max-w-[327px] flex-col items-center gap-2 rounded px-7 pt-7 pb-4 drop-shadow-sm",!t.ppm||!t.timestamp?"bg-[#F6F6F6]":"bg-[#F1F9FE]"])},[ee,t.timestamp&&t.ppm?(o(),i("div",te,c(l(t.timestamp)),1)):(o(),i("div",se,"von --:--h")),e("div",ne,[e("span",ae,c(t.ppm||"---"),1),oe]),t.timestamp&&t.ppm?(o(),w(Y,{key:2,ppm:t.ppm},null,8,["ppm"])):b("",!0),t.timestamp&&t.ppm?(o(),i("div",ie,c(r(t.ppm)),1)):(o(),i("div",le,de))],2))}},me={key:0,class:"mx-auto flex min-h-[359px] max-w-[359px] flex-col items-center justify-center gap-6 rounded-lg bg-white p-4"},he={key:1,class:"flex justify-center font-semibold"},pe={key:2,class:"mx-auto flex max-w-[359px] flex-col items-center gap-6 rounded-lg bg-white p-4"},ge=["src"],_e={class:"mt-[-12px] mb-4 text-[#7886C2]"},fe={class:"flex gap-2"},ve=e("svg",{width:"18",height:"24",viewBox:"0 0 18 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M8.57147 0C3.20402 0 0 3.52459 0 9.42862C0 15.8692 7.64575 23.4361 7.97147 23.755C8.13169 23.912 8.34711 24 8.57147 24C8.79583 24 9.01125 23.912 9.17148 23.755C9.49719 23.4361 17.1429 15.8692 17.1429 9.42862C17.1429 3.52459 13.9389 0 8.57147 0ZM8.57147 12.0001C7.72383 12.0001 6.89523 11.7487 6.19044 11.2778C5.48566 10.8069 4.93635 10.1375 4.61197 9.3544C4.28759 8.57129 4.20272 7.70957 4.36808 6.87822C4.53345 6.04687 4.94163 5.28322 5.541 4.68385C6.14037 4.08448 6.90402 3.6763 7.73537 3.51094C8.56672 3.34557 9.42844 3.43044 10.2116 3.75482C10.9947 4.0792 11.664 4.62851 12.1349 5.3333C12.6059 6.03808 12.8572 6.86669 12.8572 7.71432C12.8558 8.85056 12.4039 9.93986 11.6004 10.7433C10.797 11.5467 9.7077 11.9987 8.57147 12.0001Z",fill:"currentColor"})],-1),xe={class:"text-lg font-bold"},Ce={name:"Widget",setup(t){const r=A(),l=g(!1),s=E(),n=g([]);N(async()=>{l.value=!0;const _=r.params.siteId,x=await s.dispatch("jv/get",`sites/${_}`),m=await s.dispatch("jv/get",`sites/${_}/rooms`),h=Object.entries(m).map(async([d,p])=>{const y=await s.dispatch("jv/get",`rooms/${d}/installations`);Object.entries(y).map(([F,u])=>{(u==null?void 0:u.is_public)&&I(u)&&n.value.push({roomId:d,site:x,room:p,installationId:F,installation:u})})});await Promise.all(h),l.value=!1});const a=g(1),$=g(!1),C=()=>{a.value-1<=0?a.value=n.value.length:a.value-=1},k=()=>{a.value+1>n.value.length?a.value=1:a.value+=1};return(_,x)=>{var m,h,d,p;return l.value?(o(),i("div",me,[f(j,{"additional-classes":"border-[#1e398f]"})])):n.value.length===0?(o(),i("div",he," Keine Daten vorhanden. ")):(o(),i("div",pe,[e("img",{class:"mt-6 h-12 w-auto",src:v(O),alt:"COMo Logo"},null,8,ge),e("div",_e,[e("div",fe,[ve,e("div",xe,c(n.value[a.value-1].site.name),1)])]),f(ue,{ppm:(h=(m=n.value[a.value-1].installation)==null?void 0:m.latest_sample)==null?void 0:h.co2_ppm,timestamp:new Date(((p=(d=n.value[a.value-1].installation)==null?void 0:d.latest_sample)==null?void 0:p.timestamp_s)*1e3)},null,8,["ppm","timestamp"]),$.value?(o(),w(G,{key:0})):b("",!0),f(J,{"number-of-installations":n.value.length,"current-installation":a.value,"room-name":n.value[a.value-1].room.name,onPrevious:C,onNext:k},null,8,["number-of-installations","current-installation","room-name"])]))}}};export{Ce as default};
