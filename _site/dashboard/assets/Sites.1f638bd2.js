import{u as C,c,E as v,r as D,d as o,o as l,a as g,f as d,g as n,w as m,b as e,t as s,x as L,i as y,F as B,p as M,n as N,e as u,an as V,a8 as I}from"./vendor.bfb30425.js";import{_ as O}from"./DeletionModal.dce11adb.js";import{L as z}from"./index.de9be4ad.js";const E={key:1,class:"mt-4"},F={class:"text-sm text-gray-500"},A={class:"sm:flex sm:items-center"},R={class:"sm:flex-auto"},T={class:"text-xl font-semibold text-gray-900"},q={class:"mt-2 text-sm text-gray-700"},G={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},H={class:"mt-8 flex flex-col"},J={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},K={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},P={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-md"},Q={class:"min-w-full divide-y divide-gray-300"},U={class:"bg-gray-50 text-sm font-medium text-gray-900"},W={scope:"col",class:"px-2 py-3 text-left sm:px-6"},X={scope:"col",class:"py-3 text-left sm:px-6"},Y={scope:"col",class:"py-3 text-left sm:px-6"},Z={class:"whitespace-nowrap px-2 py-4 sm:px-6"},ee={class:"whitespace-nowrap px-2 py-4 sm:px-6"},te={class:"whitespace-nowrap px-2 py-4 sm:px-6"},se={class:"flex flex-col sm:flex-row"},oe=e("div",{class:"flex flex-row"},null,-1),le=["onClick"],ae={key:2,class:"mt-4 flex max-w-sm items-center rounded-sm border-l-4 border-yellow-400 bg-yellow-50 p-4 shadow-md"},ne={class:"flex"},ie={class:"flex-shrink-0"},de={class:"ml-3"},pe={setup(re){const i=C(),w=c(()=>i.getters["nav/isOrgContextLoading"]),h=c(()=>i.getters["nav/isOwner"]),x=c(()=>i.getters["nav/getSites"]),b=c(()=>{var t;return((t=x.value)==null?void 0:t.length)>0}),_=v(!1),r=v(),$=()=>_.value=!0,k=async()=>{console.log(`Deleting site with ID ${r.value}`),await i.dispatch("jv/delete",`sites/${r.value}`),i.commit("jv/deleteRecord",{_jv:{type:"Site",id:r.value}})},S=t=>`${t.street1}, ${t.zip} ${t.city}`;return(t,f)=>{const p=D("router-link");return o(w)?(l(),g(z,{key:0})):o(b)?(l(),d("div",E,[n(O,{open:_.value,onCloseModal:f[0]||(f[0]=a=>_.value=!1),onDeleteClicked:k,"modal-title":"delete-site-modal.title"},{default:m(()=>[e("p",F,s(t.$t("delete-site-modal.message")),1)]),_:1},8,["open"]),e("div",A,[e("div",R,[e("h1",T,s(t.$t("site.title")),1),e("p",q,s(t.$t("site.description")),1)]),e("div",G,[o(h)?(l(),g(p,{key:0,class:"indigo-button",to:{name:"addSite"}},{default:m(()=>[n(o(L),{class:"mr-2 h-4 w-4"}),e("span",null,s(t.$t("site.add")),1)]),_:1})):y("",!0)])]),e("div",H,[e("div",J,[e("div",K,[e("div",P,[e("table",Q,[e("thead",U,[e("tr",null,[e("th",W,s(t.$t("site.name")),1),e("th",X,s(t.$t("address.singular")),1),e("th",Y,s(t.$t("action")),1)])]),e("tbody",null,[(l(!0),d(B,null,M(o(x),(a,j)=>(l(),d("tr",{key:a._jv.id,class:N([j%2==0?"bg-white":"bg-gray-50"])},[e("td",Z,[n(p,{class:"como-link",to:{name:"site",params:{siteId:a._jv.id}}},{default:m(()=>[u(s(a.name),1)]),_:2},1032,["to"])]),e("td",ee,s(S(a.address)),1),e("td",te,[e("div",se,[oe,o(h)?(l(),d("div",{key:0,class:"gray-button btn-sm w-max font-semibold",onClick:()=>{$(),r.value=a._jv.id}},[n(o(V),{class:"mr-2 h-4 w-4"}),e("span",null,s(t.$t("remove")),1)],8,le)):y("",!0)])])],2))),128))])])])])])])])):(l(),d("div",ae,[e("div",ne,[e("div",ie,[n(o(I),{class:"h-5 w-5 text-yellow-400","aria-hidden":"true"})]),e("div",de,[u(s(t.$t("org.noSite"))+". ",1),n(p,{to:{name:"addSite"},class:"font-medium text-yellow-700 underline hover:text-yellow-600"},{default:m(()=>[u(s(t.$t("org.addSite"))+". ",1)]),_:1})])])]))}}};export{pe as default};
